{% extends 'backoffice/base.html' %}<!-- templates/movies_with_reservations.html -->
{% block content %}
    <h1>okres od {{ range_begin }} do {{ range_end }}</h1>
    <h2>Filmy z Zarezerwowanymi Miejscami</h2>

    <table>
        <thead>
            <tr>
                <th>Tytuł Filmu</th>
                <th>Liczba Zarezerwowanych Miejsc</th>
            </tr>
        </thead>
        <tbody>
            {% for movie in movies_with_reservations %}
                <tr>
                    <td>{{ movie.title }}</td>
                    <td>{{ movie.total_reserved_seats }}</td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="2">Brak filmów z zarezerwowanymi miejscami.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
 <h2>Najczęściej Wybierane Godziny Seansów</h2>
    <table>
        <thead>
            <tr>
                <th>Godzina</th>
                <th>Liczba Miejsc</th>
            </tr>
        </thead>
        <tbody>
            {% for showtime in popular_showtimes %}
                <tr>
                    <td>{{ showtime.hour }}:{{ showtime.minute|stringformat:"02d" }}</td>
                    <td>{{ showtime.count }}</td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="2">Brak danych o seansach.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
 <h2>Najczęściej Wybierane Dni Tygodnia</h2>
    <table>
        <thead>
            <tr>
                <th>Dzień Tygodnia</th>
                <th>Liczba Miejsc</th>
            </tr>
        </thead>
        <tbody>
            {% for showtime in popular_weekdays %}
                <tr>
                    <td>{{ showtime.day_name }}</td>
                    <td>{{ showtime.count }}</td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="2">Brak danych o seansach.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
<h2>Najczęściej Wybierane Typy Biletów</h2>
    <table>
        <thead>
            <tr>
                <th>Typ biletów</th>
                <th>Liczba Miejsc</th>
            </tr>
        </thead>
        <tbody>
            {% for popular_ticket_type in popular_ticket_types %}
                <tr>
                    <td>{{ popular_ticket_type.ticket_type__name }}</td>
                    <td>{{ popular_ticket_type.count }}</td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="2">Brak danych o biletach.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}